(function(a){"use strict";a(document).ready(function(){if("undefined"!=typeof wp&&wp.hasOwnProperty("data")){var b=!1,c=!1,d=!1;wp.data.subscribe(function(){var e=wp.data.select("core/editor");if(e&&"hp_template"===e.getCurrentPostType()){if(e.isSavingPost()&&!e.isAutosavingPost()&&e.didPostSaveRequestSucceed()&&!c&&!d){var f=a("select[name=hp_template]");if(c=!0,d=!0,a.ajax({url:f.data("url"),method:"POST",data:{hp_template:f.val()},beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",hivepressCoreData.apiNonce)},complete:function(b){var c=b.responseJSON;if(c&&c.hasOwnProperty("error")){var e="";c.error.hasOwnProperty("errors")?a.each(c.error.errors,function(a,b){e+=b.message}):c.error.hasOwnProperty("message")&&(e+=c.error.message),alert(e)}d=!1}}),f.length&&f.val()!==e.getEditedPostSlug())var g=setInterval(function(){e.isSavingPost()||b||(window.location.reload(),b=!0,clearInterval(g))},500)}e.isSavingPost()||(c=!1)}})}hivepress.getComponent("notice").each(function(){var b=a(this);b.find("button, .button").on("click",function(c){var d=a(this),e=b.data("option");if(d.is("button"))e=null;else if(!e)return;a.ajax({url:b.data("url"),method:"POST",data:{dismissed:!0,option:e},beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",hivepressCoreData.apiNonce)},complete:function(){d.is("button")||b.slideUp(100)}}),d.is("button")||c.preventDefault()})}),hivepress.getComponent("file-select").on("click",function(b){var c=a(this),d=c.parent().children("div").clone(),e=wp.media({title:c.text(),button:{text:c.text()},library:{type:["image"]},multiple:!1});e.on("select",function(){var b=e.state().get("selection").first().toJSON();d.find("img").remove(),a("<img />").attr("src",b.url).prependTo(d),c.parent().children("div").remove(),d.prependTo(c.parent()),d.find("input[type=\"hidden\"]").val(b.id)}),e.open(),b.preventDefault()}),a(document).on("click",hivepress.getSelector("file-remove"),function(b){var c=a(this).parent();c.find("img").remove(),c.find("input[type=\"hidden\"]").val(""),b.preventDefault()}),a("a#deactivate-hivepress").on("click",function(b){a.fancybox.close(),a.fancybox.open({src:"#hivepress_deactivate_modal",touch:!1}),b.preventDefault()})})})(jQuery);