(function(a){"use strict";a(document).ready(function(){if("undefined"!=typeof wp&&wp.hasOwnProperty("data")){var b=!1;wp.data.subscribe(function(){var c=wp.data.select("core/editor");if(c&&"hp_template"===c.getCurrentPostType()&&c.isSavingPost()&&!c.isAutosavingPost()&&c.didPostSaveRequestSucceed()){var d=a("select[name=hp_template]");if(d.length&&d.val()!==c.getEditedPostSlug())var e=setInterval(function(){c.isSavingPost()||b||(window.location.reload(),b=!0,clearInterval(e))},500)}})}hivepress.getComponent("notice").each(function(){var b=a(this);b.find("button").on("click",function(){a.ajax({url:b.data("url"),method:"POST",data:{dismissed:!0},beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",hivepressCoreData.apiNonce)}})})}),hivepress.getComponent("field").each(function(){var b=a(this);if(b.data("parent")){var c=a(":input[name=\""+b.data("parent")+"\"]");b.parent().is("td")&&(b=b.closest("tr")),c.length&&((!c.val()||c.is(":checkbox")&&!c.prop("checked"))&&b.hide(),c.on("change",function(){c.val()&&(!c.is(":checkbox")||c.prop("checked"))?b.show():b.hide()}))}}),hivepress.getComponent("file-select").on("click",function(b){var c=a(this),d=c.parent().children("div").clone(),e=wp.media({title:c.text(),button:{text:c.text()},library:{type:["image"]},multiple:!1});e.on("select",function(){var b=e.state().get("selection").first().toJSON();d.find("img").remove(),a("<img />").attr("src",b.url).prependTo(d),c.parent().children("div").remove(),d.prependTo(c.parent()),d.find("input[type=\"hidden\"]").val(b.id)}),e.open(),b.preventDefault()}),a(document).on("click",hivepress.getSelector("file-remove"),function(b){var c=a(this).parent();c.find("img").remove(),c.find("input[type=\"hidden\"]").val(""),b.preventDefault()}),hivepress.getComponent("form").find("input[readonly], textarea[readonly]").on("click",function(){this.select(),document.execCommand("copy")}),a("a#deactivate-hivepress").on("click",function(b){a.fancybox.close(),a.fancybox.open({src:"#hivepress_deactivate_modal",touch:!1}),b.preventDefault()})})})(jQuery);